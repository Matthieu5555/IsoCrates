# IsoCrates Production Configuration
#
# Copy this file to scripts/.env.production and fill in every CHANGEME value.
# The deploy script (scripts/deploy.sh) generates most secrets automatically,
# but this template is useful if you prefer to configure manually or need to
# add LLM settings after the initial deploy.
#
# The application validates this configuration at startup and refuses to run
# in production with insecure defaults — so a missing value will produce a
# clear error rather than a silent misconfiguration.

# ============================================
# CORE
# ============================================
DOMAIN=docs.yourcompany.com
ENVIRONMENT=production

# ============================================
# DATABASE
# ============================================
# Generate a strong password: openssl rand -hex 32
POSTGRES_PASSWORD=CHANGEME
DATABASE_URL=postgresql://isocrates:CHANGEME@postgres:5432/isocrates

# ============================================
# AUTHENTICATION
# ============================================
AUTH_ENABLED=true
# Generate a unique signing key: openssl rand -hex 32
JWT_SECRET_KEY=CHANGEME

# ============================================
# CORS
# ============================================
# Must match the exact origin users visit in their browser.
# Multiple origins are comma-separated. Wildcards are rejected at startup.
CORS_ALLOWED_ORIGINS=https://docs.yourcompany.com

# ============================================
# GITHUB WEBHOOKS
# ============================================
# Set this to the same value you enter in GitHub webhook settings.
# Generate with: openssl rand -hex 20
GITHUB_WEBHOOK_SECRET=CHANGEME

# ============================================
# FRONTEND
# ============================================
NEXT_PUBLIC_API_URL=https://docs.yourcompany.com
NEXT_PUBLIC_API_URL_INTERNAL=http://backend-api:8000

# ============================================
# LLM CONFIGURATION (required for doc generation)
# ============================================
# The agent uses three tiers: scout (fast scan), planner (outline),
# writer (full docs). Each tier falls back to the global LLM_BASE_URL
# and LLM_API_KEY unless overridden per-tier.
#
# OpenRouter is the easiest start — one API key, many models.
# See docs/LLM_PROVIDERS.md for alternatives and cost estimates.
LLM_BASE_URL=https://openrouter.ai/api/v1
LLM_API_KEY=CHANGEME
OPENROUTER_API_KEY=CHANGEME
SCOUT_MODEL=openrouter/mistralai/devstral-2512
PLANNER_MODEL=openrouter/mistralai/mistral-medium-latest
WRITER_MODEL=openrouter/mistralai/devstral-2512

# Number of parallel writer agents (default: 3)
# WRITER_PARALLEL=3

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# ============================================
# OPTIONAL: Semantic Search (Embeddings)
# ============================================
# Requires PostgreSQL with pgvector. Leave EMBEDDING_MODEL empty to
# use keyword search only (full-text search still works without this).
#
# EMBEDDING_MODEL=openai/text-embedding-3-small
# EMBEDDING_API_KEY=CHANGEME
# EMBEDDING_DIMENSIONS=0

# ============================================
# OPTIONAL: Chat / RAG
# ============================================
# Enables an in-app chat that answers questions using your docs as context.
# Leave CHAT_MODEL empty to disable.
#
# CHAT_MODEL=openai/gpt-4o-mini
# CHAT_API_KEY=CHANGEME
